#! /usr/unsupported/bin/perl
# -*- mode: cperl -*-
# -------------------------------------------------------------
# file: mkgrid.pl
# -------------------------------------------------------------
# -------------------------------------------------------------
# Battelle Memorial Institute
# Pacific Northwest Laboratory
# -------------------------------------------------------------
# -------------------------------------------------------------
# Created October 15, 2003 by William A. Perkins
# Last Change: Sat Jan  7 20:34:10 2006 by William A. Perkins <perk@mcperktop.local>
# -------------------------------------------------------------

# RCS ID: $Id$

use strict;

# -------------------------------------------------------------
#  variable initialization
# -------------------------------------------------------------
my $program;
($program = $0) =~ s/.*\///;
my $usage = "usage: $program";


my $L = 1000.0;
my $B = 10.0;
my $Z0 = 15.0-7.9131;
my $dx = 10.0;
my $manning = 0.030;
my $g = 9.81;


# -------------------------------------------------------------
# main program
# -------------------------------------------------------------

my $dhat;
my $d;
my $z = $Z0;
my $i;

my $x;
my $y;
my $yprime;
my $So;

$i = 1;
for ($x = 0.0; $x <= $L; $x += $dx, $i += 1) {
  my $tmp;
  $tmp = $x/$L - 0.5;
  $d = (4.0/$g)**(1.0/3.0)*(1.0 + 0.5*exp(-16*($tmp)**2.0));
  $dhat = -(4.0/$g)**(1.0/3.0)*(2.0/125.0)*($tmp)*exp(-16.0*($tmp)**2.0);
  $So = (1.0 - 4.0/($g*$d**3.0))*$dhat + (0.36*(2.0*$d+10.0)**(4.0/3.0))/((10.0*$d)**(10.0/3.0));
  if ($x > 0.0) {
    $z -= $So*$dx;
  } else {
    $z = $Z0;
  }
  # printf("%5d %10.4f %10.4f %10.4f %10.7f\n", $i, $x, $z, $d, $dhat);
  printf("%5d %5d %10.4f %10d %10.4f %10.4f 1000  0.001 / %10.4f\n", 
         1, $i, ($L-$x)/0.3048, 100, $z/0.3048, $manning, $d/0.3048);

}
